# 对接银行业务及需求

## 自助终端缴费

自助终端通过调用银行接口，返回聚合动态二维码，用户支付成功后通知自助终端后台服务，终端接收到支付结果为用户写卡。银行方需提供接口：

1. 下单接口（主扫或被扫）：通过传入商户号及用户待支付金额生成聚合二维码，返回二维码地址。
2. 查询接口：通过流水号查询订单状态，返回用户支付结果（待支付，成功，失败）。
3. 退款接口：通过流水号为用户发起退款。

## 微信公众号缴费

微信公众平台对接银行H5接口，直接发起支付，用户支付成功后，返回上一步继续相关业务流程。银行方需提供接口：

1. 下单接口（H5公众号接口）：通过传入商户号，微信公众号AAPPID，支付金额发起支付。

## 营业厅柜台扫码盒（枪）收款

营业厅柜台收费时可通过银行提供的扫码盒（枪）扫描用户的付款码进行收款，收款成功继续下一步业务。银行方需提供接口：

1. 下单接口（被扫）：通过传入商户号、用户待支付金额及用户授权码直接下单支付。
2. 查询接口：通过流水号查询订单状态，返回用户支付结果（待支付，成功，失败）。
3. 退款接口：通过流水号为用户发起退款发起退款。

## 银行掌银代售

用户通过银行掌上银行APP的生活缴费功能进行充值缴费。以银行方或燃气方接口为准，提供以下接口：

1. 查询接口：通过用户输入的用户编号查询用户信息。
2. 划价接口：通过用户选择的气量为用户计算实际支付金额（用户单价存在阶梯，实际计算规则以燃气方为准）。
3. 保存记录：用户支付成功后，掌银调用燃气方保存记录接口为用户保存收费记录。

## 银行ATM代售

银行方对接我方接口，用户通过银行ATM设备购气。以银行方或燃气方接口为准，提供以下接口：

1. 查询接口：通过用户插入卡卡号查询用户信息。
2. 划价接口：通过用户选择的气量为用户计算实际支付金额（用户单价存在阶梯，实际计算规则以燃气方为准）。
3. 保存记录：用户通过ATM设备支付成功后，ATM设备调用燃气方保存记录接口为用户保存收费记录。

